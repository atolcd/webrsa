<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:html="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ChangeLog</title><style type="text/css">
					
						table { border-collapse: collapse; }
						td, th { border: 1px solid silver; padding: 0.125em 0.25em; vertical-align: top; }
						thead th, tbody th { text-align: center; background: #cecece; }
						tbody tr:nth-child(even) { background: #efefef; }
						tbody th.release { text-align: left; }
					
				</style><script type="text/javascript">
					
						function toggleColumn( className ) {
							var elements = document.getElementsByClassName( className );
							for( var i = 0 ; i < elements.length ; i++ ) {
								var display = elements[i].style.display;
								if( display == 'none' ) {
									elements[i].style.display = 'table-cell';
								}
								else {
									elements[i].style.display = 'none';
								}
							}
						}
					
				</script></head><body><h1>ChangeLog</h1><ul><li><a href="#" onclick="toggleColumn( 'fichiers' );return false;" title="Voir la liste des fichiers">Fichiers</a></li></ul><table><thead><tr><th class="revision">Rév.</th><th class="date">Date</th><th class="message">Message</th><th class="fichiers">Fichiers</th></tr></thead><tbody>
<tr class="logentry"><td class="revision">10405</td><td class="date">14/11/2017 15:21</td><td class="message">Correction: dans la méthode AbstractWebrsaCohorteApre66::searchQuery(), on faisait appel à la méthode de modèle inexistante "virtualField", ce qui ne posait pas de souci avant PHP 5.6 mais qui génère une erreur interne du serveur en PHP 5.6+; à présent, on appelle la méthode de modèle "sqVirtualField" afin d'obtenir le bon résultat. (Atol CD par mail et téléphone).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Model/Abstractclass/AbstractWebrsaCohorteApre66.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10404</td><td class="date">13/11/2017 10:24</td><td class="message">Amélioration: ajout du filtre par "Recherche par état du Tag" dans le formulaire de recherche par dossier / allocataire. Clôture le ticket #41909 (CD 66, Atol CD).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Controller/Component/WebrsaRecherchesDossiersComponent.php</li><li><strong>M:</strong>/trunk/app/Locale/fra/LC_MESSAGES/dossiers.po</li><li><strong>M:</strong>/trunk/app/Model/Tag.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaRechercheDossier.php</li><li><strong>M:</strong>/trunk/app/View/Dossiers/search.ctp</li></ul></td></tr>
<tr class="logentry"><td class="revision">10403</td><td class="date">06/11/2017 15:09</td><td class="message">Correction: à présent, on ne crée plus d'entrée dans la table orientsstructs pour les bénéficiaires soumis à droits et devoirs lorsque l'on ajoute ou modifie une personne ou une ressource d'une personne d'un foyer (cf. la nouvelle clé de configuration "Foyer.refreshSoumisADroitsEtDevoirs.ajoutOrientstruct" pour retrouver l'ancien comportement). Ajout du patch SQL patch-3.2.4-datas-cg66.sql permettant de supprimer un maximum d'entrées erronées de la table orientsstructs pour le CD 66. Permet de clôturer le ticket #41544. (CD 66, Atol CD)</td><td class="fichiers"><ul class="paths"><li><strong>A:</strong>/trunk/app/Config/sql/patches/3.x/patch-3.2.4-datas-cg66.sql</li><li><strong>M:</strong>/trunk/app/Config/webrsa.cg58.inc.default</li><li><strong>M:</strong>/trunk/app/Config/webrsa.cg66.inc.default</li><li><strong>M:</strong>/trunk/app/Config/webrsa.cg93.inc.default</li><li><strong>M:</strong>/trunk/app/Config/webrsa.cg976.inc.default</li><li><strong>M:</strong>/trunk/app/Model/Foyer.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaCheck.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10402</td><td class="date">06/11/2017 13:47</td><td class="message">Améliorations: à présent, dans l'écran d'ajout ou de modification d'avis technique pour le CUI, la valeur "En attente de décision" ne figure plus dans la liste déroulante de l'avis, les champs "Avis" et "Motif" ont à présent la valeur vide en cas d'ajout afin d'éviter les erreurs de manipulation. Ajout d'une demande de confirmation lorsque l'on clique sur le lien "Supprimer" dans la liste des avis techniques du CUI d'un bénéficiaire afin d'éviter des erreurs de manipulation. Ajout du filtre "Rechercher par avis technique" &gt; "Avis" dans le moteur de recherche par CUI du CD 66 afin de pouvoir trouver et corriger les avis techniques "En attente de décision". Clôture le ticket #40470 (CD 66, Atol CD).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Controller/Component/WebrsaRecherchesCuisComponent.php</li><li><strong>M:</strong>/trunk/app/Controller/Propositionscuis66Controller.php</li><li><strong>M:</strong>/trunk/app/Locale/fra/LC_MESSAGES/cuis_search_cg66.po</li><li><strong>M:</strong>/trunk/app/Locale/fra/LC_MESSAGES/propositionscuis66.po</li><li><strong>M:</strong>/trunk/app/Model/Abstractclass/AbstractAppModelLieCui66.php</li><li><strong>M:</strong>/trunk/app/Model/Propositioncui66.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaRechercheCui.php</li><li><strong>M:</strong>/trunk/app/View/Cuis/search.ctp</li><li><strong>M:</strong>/trunk/app/View/Propositionscuis66/edit.ctp</li><li><strong>M:</strong>/trunk/app/View/Propositionscuis66/index.ctp</li></ul></td></tr>
<tr class="logentry"><td class="revision">10401</td><td class="date">31/10/2017 12:55</td><td class="message">Correction: à présent, dans la liste des traitements non clos liés à n'importe quel dossier du Foyer qui apparaît en bas du formulaire d'ajout / de modification d'un traitement PCG, on retrouve bien tous les traitements non clos du foyer, même ceux liés à l'autre personne du foyer lorsque le dossier PCG ne concerne pas la personne pour laquelle on crée le nouveau traitement PCG. Permet de clôturer le ticket #41448. (CD 66, Atol CD)</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Model/Personnepcg66.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10400</td><td class="date">30/10/2017 13:51</td><td class="message">Correction: à présent, l'accès aux liens "Modifier" et "Supprimer" des mails du CUI n'engendrent plus d'erreur 500. Amélioration du shell Positionscui66, ajout de la ventialtion du nombre de CUI par position après le re-calcul des positions. En lien avec le ticket #40470 (CD 66, Atol CD)</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Console/Command/Positionscui66Shell.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaCui.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaCui66.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10399</td><td class="date">27/10/2017 13:46</td><td class="message">Correction: à présent, dans les écrans de choix des dossiers à passer en EP ou en COV, on n'a plus l'erreur 404 lorsque l'on essaie de passer en page 2 des dossiers d'une thématique et qu'il existe au moins une autre thématique n'ayant pas autant de pages. Il subsiste un bug, sur les onglets autres que le premier, où le tri par ordre descendant sur une colonne n'est pas possible</td><td class="fichiers"><ul class="paths"><li><strong>A:</strong>/trunk/app/Controller/Component/MultiplePaginatorComponent.php</li><li><strong>M:</strong>/trunk/app/Controller/Dossierscovs58Controller.php</li><li><strong>M:</strong>/trunk/app/Controller/DossiersepsController.php</li><li><strong>M:</strong>/trunk/app/Lib/basics.php</li><li><strong>M:</strong>/trunk/app/Test/Case/BasicsTest.php</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.defautinsertionep66.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.nonorientationproep58.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.nonorientationproep93.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.nonrespectsanctionep93.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.regressionorientationep58.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.reorientationep93.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.saisinebilanparcoursep66.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.saisinepdoep66.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.sanctionep58.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.sanctionrendezvousep58.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Commissionseps/view.signalementep93.liste.ctp</li><li><strong>M:</strong>/trunk/app/View/Covs58/view.ctp</li><li><strong>M:</strong>/trunk/app/View/Dossierscovs58/choose.ctp</li><li><strong>M:</strong>/trunk/app/View/Dossierseps/choose.ctp</li><li><strong>A:</strong>/trunk/app/webroot/js/webrsa.cake.tabbed.paginator.js</li><li><strong>M:</strong>/trunk/app/webroot/js/webrsa.common.prototype.js</li><li><strong>M:</strong>/trunk/app/webroot/js/webrsa.js</li><li><strong>M:</strong>/trunk/app/webrsa.sh</li></ul></td></tr>
<tr class="logentry"><td class="revision">10398</td><td class="date">26/10/2017 11:36</td><td class="message">Correction: à présent le shell Correspondancespersonnes sauvgarde les correspondances par "tranches" afin d'éviter de saturer la mémoire lorsqu'il y a de nombreux enregistrement. Ajout de la variable de configuration "Correspondancepersonne.max" (250000 par défaut) qui permet de spécifier le nombre d'enregistrements à traiter dans chacune des "tranches". (CD 93, Atol CD par mail)</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Config/webrsa.cg58.inc.default</li><li><strong>M:</strong>/trunk/app/Config/webrsa.cg66.inc.default</li><li><strong>M:</strong>/trunk/app/Config/webrsa.cg93.inc.default</li><li><strong>M:</strong>/trunk/app/Config/webrsa.cg976.inc.default</li><li><strong>M:</strong>/trunk/app/Model/Correspondancepersonne.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaCheck.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10397</td><td class="date">26/10/2017 08:23</td><td class="message">Correction: à présent, dans le shell Automatisationseps, on affiche l'erreur explicitement lorsque l'on a une erreur de la base de données comme la violation d'un index unique. Par ailleurs, ne sont plus pris en compte par le shell dans la création d'un dossier d'EP pour la thématique "Demandes de suspension" avec comme origine "PDO (DO 19)" les allocataires ayant contractualisé entre-temps (ce qui générait l'erreur sur l'index unique nonrespectssanctionseps93_origine_propopdo_id_rgpassage_idx). (CD 93, Atol CD par mail)</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Console/Command/AutomatisationsepsShell.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10396</td><td class="date">20/10/2017 11:31</td><td class="message">Mise à jour de la configuration par défaut du CD 66 afin de "désactiver" les chiffres d'affaires maximum pour la fiche de caclul des traitements PCG (clés "Traitementpcg66.fichecalcul_ca&lt;type&gt;max'") au moyen de la constante PHP PHP_INT_MAX. En lien avec le ticket #40390 (CG 66).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Config/webrsa.cg66.inc.default</li></ul></td></tr>
<tr class="logentry"><td class="revision">10395</td><td class="date">20/10/2017 11:18</td><td class="message">Mise à jour des valeurs de tranches d'âge pour les moteurs de recherche par défaut du CD 66 à partir des valeurs utilisées en production au 12/10/2017.</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Config/webrsa.cg66.inc.default</li></ul></td></tr>
<tr class="logentry"><td class="revision">10394</td><td class="date">19/10/2017 09:49</td><td class="message">Amélioration: ajout du "Régime Micro-bic Agricole" à la fiche de calcul des traitements PCG, ajout de 2 nouvelles clé de configuration "Traitementpcg66.fichecalcul_caagrimax" et "Traitementpcg66.fichecalcul_abattagriagri" au fichier app/Config/webrsa.cg66.inc.default. Permet de clôturer le ticket #40390 (CG 66).</td><td class="fichiers"><ul class="paths"><li><strong>A:</strong>/trunk/app/Config/sql/patches/3.x/patch-3.2.4.sql</li><li><strong>M:</strong>/trunk/app/Config/webrsa.cg66.inc.default</li><li><strong>M:</strong>/trunk/app/Locale/fra/LC_MESSAGES/traitementpcg66.po</li><li><strong>M:</strong>/trunk/app/Model/Traitementpcg66.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaCheck.php</li><li><strong>M:</strong>/trunk/app/View/Decisionsdossierspcgs66/add_edit.ctp</li><li><strong>M:</strong>/trunk/app/View/Traitementspcgs66/add_edit.ctp</li><li><strong>M:</strong>/trunk/app/View/Traitementspcgs66/view.ctp</li></ul></td></tr>
<tr class="logentry"><td class="revision">10393</td><td class="date">16/10/2017 12:15</td><td class="message">Amélioration: à présent, lorsque l'on ajoute ou modifie une action de rôle (pour le tableau de bord principal du CD 66), si l'URL est vide alors le message d'avertissement "L'URL est vide, aucun résultat ne sera donc calculable." apparaît après un enregistrement réussi, sinon si l'URL ne concerne pas un des nouveaux moteurs de recherche, alors le message d'avertissement "L'URL ne fait pas partie des nouveaux moteurs de recherche, aucun résultat ne sera donc calculable." apparaît. En lien avec le ticket #40774 (CG 66).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Controller/ActionrolesController.php</li><li><strong>M:</strong>/trunk/app/Model/Actionrole.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10392</td><td class="date">16/10/2017 11:13</td><td class="message">Correction: à présent, dans le tableau de bord principal, les colonnes "Nombre de résultats" et "Action" ne sont plus vides et fonctionnent correctement même lorsque l'URL contient des caractères spéciaux (ex. "-"). En lien avec le ticket #40774 (CG 66).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Lib/basics.php</li><li><strong>M:</strong>/trunk/app/Test/Case/BasicsTest.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10391</td><td class="date">12/10/2017 13:25</td><td class="message">Correction: à présent, dans le tableau de bord principal, les colonnes "Nombre de résultats" et "Action" ne sont plus vides et fonctionnent correctement même lorsque l'URL contient un espace (ex. "Search__Canton__canton:PERPIGNAN%2B1"). Clôture le ticket #40774 (CG 66).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Lib/basics.php</li><li><strong>M:</strong>/trunk/app/Test/Case/BasicsTest.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10390</td><td class="date">12/10/2017 12:34</td><td class="message">Amélioration: ajout du tri par "Intitulé de l'action" dans les tableaux des onglets du tableau de bord principal. Clôture le ticket #40755 (CG 66).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Controller/DashboardsController.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10389</td><td class="date">10/10/2017 11:42</td><td class="message">Correction: dans les gestions de listes de fiches de candidatures, les fiches en cours ne repassent plus en attente et les erreurs de validation s'affichent à présent correctement dans les formulaires. Clôture le ticket #38482 (CG 66).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Model/ActioncandidatPersonne.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaCohorteActioncandidatPersonneEnattente.php</li><li><strong>M:</strong>/trunk/app/Model/WebrsaCohorteActioncandidatPersonneEncours.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10388</td><td class="date">04/10/2017 14:11</td><td class="message">Plugin Gedooo: correction de la classe vendor GDO_FusionType afin de ne plus utiliser la classe Configure si celle-ci n'existe pas.</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Plugin/Gedooo/Vendor/phpgedooo_nouveau/GDO_FusionType.class</li></ul></td></tr>
<tr class="logentry"><td class="revision">10387</td><td class="date">04/10/2017 14:10</td><td class="message">Plugin Gedooo: correction du script pdfs_compare.sh afin de pouvoir prendre en compte des fichiers comportant des espaces dans leur chemin.</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Plugin/Gedooo/Doc/scripts/pdfs_compare.sh</li></ul></td></tr>
<tr class="logentry"><td class="revision">10386</td><td class="date">28/09/2017 14:03</td><td class="message">Amélioration: ajout de la vérification fine des propriétaires et des permissions des fichiers et dossiers de cache dans la partie "Vérification de l'application". En lien avec le ticket #40260 (CG 66).</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Model/WebrsaInstallCheck.php</li><li><strong>M:</strong>/trunk/app/Plugin/Appchecks/Model/Check.php</li><li><strong>M:</strong>/trunk/app/View/Checks/index.ctp</li></ul></td></tr>
<tr class="logentry"><td class="revision">10385</td><td class="date">27/09/2017 11:17</td><td class="message">Correction: modification des critères par défaut de la gestion de listes "Dossiers PCGs en attente d'affectation" afin d'avoir dans les résultats tous les dossiers "En attente d'affectation", même ceux dont le pôle a déjà été choisi. Ajout du filtre "Filtrer par Dossier PCG" &gt; "Possède un pôle chargé du dossier ?" permetttant d'obtenir des résultats plus fins. Corrige le ticket #38480 (CG 66)</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Controller/Component/WebrsaCohortesDossierspcgs66Component.php</li><li><strong>M:</strong>/trunk/app/Locale/fra/LC_MESSAGES/dossierspcgs66.po</li><li><strong>M:</strong>/trunk/app/Model/WebrsaCohorteDossierpcg66Enattenteaffectation.php</li><li><strong>M:</strong>/trunk/app/View/Dossierspcgs66/cohorte_enattenteaffectation.ctp</li></ul></td></tr>
<tr class="logentry"><td class="revision">10384</td><td class="date">22/09/2017 11:26</td><td class="message">Correction: dans les méthodes traitement et visualisation de la classe Gestionssanctionseps58Controller, il manquait les enumérations des décisons, ce qui impliqait que dans l'écran "Gestion des sanctions émises par l'EP", les listes déroulantes de "Modification de la sanction" étaient vides et ne permettaient pas le traitement. En lien avec le ticket #2011194 (CG 58)</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Controller/Gestionssanctionseps58Controller.php</li></ul></td></tr>
<tr class="logentry"><td class="revision">10383</td><td class="date">22/09/2017 11:20</td><td class="message">Correction: la méthode ajaxadd de la classe Cohortesd2pdvs93Controller a à présent les mêmes droits que la méthode index de la classe Cohortesd2pdvs93Controller; en effet, si un utilisateur a accès à la cohorte de traitement, il faut automatiquement qu'il ait la possibilité de remplir le formulaire D2. (CG 93)</td><td class="fichiers"><ul class="paths"><li><strong>M:</strong>/trunk/app/Controller/Cohortesd2pdvs93Controller.php</li></ul></td></tr>
</tbody></table><script type="text/javascript">
					
						toggleColumn( 'fichiers' );
					
				</script></body></html>
